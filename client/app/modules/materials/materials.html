<!-- <div class="col s12" style="margin-top:-10px;">
  <h5 class="secondary-content">Suppliers</h5>
</div>
<div class="col s12">
  <div class="col s3">
    <a ng-if="currentTeam.type == 'builder' && isLeader" class="dropdown-button btn-large col s12"
       data-activates="createNew" dropdown data-gutter="15" data-beloworigin="true" style="margin-top: 8px; margin-bottom: 15px">Create New</a>
    <ul id="createNew" class="dropdown-content" style="margin-top: 15px">
      <li><a class="modal-trigger" href="#newMaterialPackage">Material Package</a></li>
      <li>
        <div class="divider"></div>
      </li>
       <li><a class="modal-trigger" href="#newContractorPackage">Contractor Package</a></li>
       <li><a class="modal-trigger" href="#newWorkPackage">Work Package</a></li>
    </ul>
  
    <div class="collection">
      <a href="#!" ng-click="filter = {isCompleted : false, isSelect : true}" class="collection-item"
         ng-class="{'active' : !filter.isCompleted && filter.isSelect}">In Progress<span class="badge new" ng-if="inProgressTotal">{{inProgressTotal}}</span></a>
      <a href="#!" ng-click="filter = {isCompleted : false, isSelect : false, isCancel:false} " class="collection-item"
         ng-class="{'active' : !filter.isAccept && !filter.isSelect}">In Tender</a>
      <a href="#!" ng-click="filter = {isCompleted : true, isSelect : true}" class="collection-item"
         ng-class="{'active' : filter.isCompleted  && filter.isSelect}">Completed</a>
    </div>
  </div>
  
  <div class="col s9">
    <div class="col s12">
      <div class="collection z-depth-1 list">
        <span ng-repeat="materialPackage in materialPackages | filter : filter">
          <a class="collection-item" ng-if="(currentTeam.type == 'builder' || currentTeam.type == 'homeOwner') && materialPackage.isSelect"
             ui-sref='materialRequest.materialPackageInProcess({id: materialPackage.project, packageId: materialPackage._id})'>
            {{materialPackage.name}}<span class="new badge" ng-if="materialPackage.__v">{{materialPackage.__v}}</span></a>
          <a class="collection-item" ng-if="(currentTeam.type == 'builder' || currentTeam.type == 'homeOwner') && !materialPackage.isSelect"
             ui-sref='materialRequest.viewMaterialRequest({id: materialPackage.project, packageId: materialPackage._id})'>
            {{materialPackage.name}}<span class="new badge" ng-if="materialPackage.__v">{{materialPackage.__v}}</span></a>
          <a ng-show="materialPackage.isSupplier" class="collection-item" ng-if="currentTeam.type == 'supplier' && materialPackage.isSelect && materialPackage.winnerTeam._id == currentTeam._id"
             ui-sref='materialRequest.materialPackageInProcess({id: materialPackage.project, packageId: materialPackage._id})'>
            {{materialPackage.name}}<span class="new badge" ng-if="materialPackage.__v">{{materialPackage.__v}}</span></a>
          <a ng-show="materialPackage.isSupplier" class="collection-item" ng-if="currentTeam.type == 'supplier' && !materialPackage.isSelect"
             ui-sref='materialRequest.sendQuote({id: materialPackage.project, packageId: materialPackage._id})'>
            {{materialPackage.name}}<span class="new badge" ng-if="materialPackage.__v">{{materialPackage.__v}}</span></a>
        </span>
      </div>
    </div>
  </div>
</div>

<div create-package></div>
 -->

 <div class="row" style="padding: 12px">
 <div class="col s10 offset-s1">
   <div class="collection with-header">
         <div class="row collection-header" style="margin-bottom:0px">
       
       <div class="col">
         <p ng-if="currentTeam.type == 'builder'" style="margin-left: 10px"><strong>SUPPLIERS</strong></p>
         <p ng-if="currentTeam.type == 'supplier'" style="margin-left: 10px"><strong>MATERIALS PACKAGE</strong></p>
      </div>
      <div class="col right" style="">
         <a ng-if="currentTeam.type == 'builder' && isLeader" href="#newMaterialPackage" class="modal-trigger" style="padding: 5px; font-size: 12px; color: black">ADD A MATERIAL ORDER</a>
      </div>
         </div>
         <div class="row collection-header" style="margin-bottom:0px;">
       <div class="col s12">
         <div style="font-size: 12px;">
           <a ng-class="{'current-select' : filterAll}" style="margin-left:30px; padding: 5px;" ng-click="filter = {}; filterAll = true">ALL</a>
           <a ng-class="{'current-select' : filter.isCompleted == false && filter.isSelect == false}" ng-click="filter = {isCompleted : false, isSelect : false, isCancel:false}; filterAll = false " style="margin-left:30px; padding: 5px;">IN TENDER</a>
           <a ng-class="{'current-select' : !filter.isCompleted && filter.isSelect}" ng-click="filter = {isCompleted : false, isSelect : true}; filterAll = false" style="margin-left:30px; padding: 5px;">IN PROGRESS</a>
           <a ng-class="{'current-select' : filter.isCompleted && filter.isSelect}" ng-click="filter = {isCompleted : true, isSelect : true}; filterAll = false" style="margin-left:30px; padding: 5px;">COMPLETED</a>
         </div>
       </div>
     </div>
     <div  style="height: {{contentHeight -30}}px; overflow-y: auto; background-color: white; overflow-x: hidden;">
       <div ng-show="currentTeam.type == 'builder' || materialPackage.isSupplier" ng-mouseover="activeHover($event)" ng-mouseleave="removeHover($event)" class="collection-item row" ng-repeat="materialPackage in materialPackages | filter: filter" style="cursor:pointer" ng-click="goToMaterialPackageRequest(materialPackage)">
         <div class="col s9">{{materialPackage.name}}</div>
         <!-- <div class="col s9" ng-if="currentTeam.type == 'supplier'"></div> -->
           <!-- <div> -->
            <!-- when user is a builder -->
            <!-- package in process -->
            <!-- <a ng-if="(currentTeam.type == 'builder' || currentTeam.type == 'homeOwner') && materialPackage.isSelect" ui-sref="materialRequest.materialPackageInProcess({id: materialPackage.project, packageId: materialPackage._id})">{{materialPackage.name}} -->
            <!-- </a> -->
            <!-- package in tender -->
            <!-- <a ng-if="(currentTeam.type == 'builder' || currentTeam.type == 'homeOwner') && !materialPackage.isSelect" ui-sref="materialRequest.viewMaterialRequest({id: materialPackage.project, packageId: materialPackage._id})">{{materialPackage.name}} -->
            <!-- </a> -->

            <!-- when user is a contractor -->
            <!-- <a ng-if="currentTeam.type == 'supplier' && materialPackage.isSelect" ui-sref="materialRequest.materialPackageInProcess({id: materialPackage.project, packageId: materialPackage._id})">{{materialPackage.name}} -->
            <!-- </a> -->
            <!-- package in tender -->
            <!-- <a ng-if="currentTeam.type == 'supplier' && !materialPackage.isSelect" ui-sref="materialRequest.sendQuote({id: materialPackage.project, packageId: materialPackage._id})">{{materialPackage.name}} -->
            <!-- </a> -->
          <!-- </div> -->
         <!-- </div> -->
         <div style="color: #757575">
           <div class="col s1 valign-wrapper">
             <div style="font-size:15px;">{{materialPackage.threads.length}}</div>
             <i style="font-size: 15px; margin-left: 5px" class="material-icons valign">message</i>
           </div>
           <div class="col s1 valign-wrapper">
             <div style="font-size:15px;">{{materialPackage.files.length}}</div>
             <i style="font-size: 15px; margin-left: 5px" class="material-icons valign">insert_drive_file</i>
           </div>
           <div class="col s1 valign-wrapper">
             <div style="font-size:15px;">{{materialPackage.tasks.length}}</div>
             <i style="font-size: 15px; margin-left: 5px" class="material-icons valign">check</i>
           </div>
         </div>
       </div>
     </div>
   </div>
 </div>
</div>

<!-- MATERIAL PACKAGE -->
<div id="newMaterialPackage" class="modal modal-fixed-footer">
  <form method="post" name="materialForm" ng-submit="createMaterialPackage(materialForm)" novalidate>
    <div class="modal-content">
      <div class="row">
        <div class="col s12">
          <h5>New Material Package for  {{currentProject.name}}</h5>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s6">
          <input id="project_name" name="name" type="text" class="validate" required ng-model="material.name"
                 ng-class="{'invalid' : materialForm.name.$invalid && materialSubmitted}">
          <label for="project_name">Material Package Title</label>

          <p class="validate-message" ng-if="materialForm.name.$error.required && materialSubmitted">Package name is
            required</p>
        </div>
        <div class="input-field col s3">
          <p>
            <input class="valign" type="checkbox" ng-model="material.isSkipInTender" id="skipInTender"/>
            <label for="skipInTender">Skip Tender Stage</label>
          </p>
        </div>
        <div class="input-field col s3">
          <label for="date_required" ng-if="!material.isSkipInTender">Tender Due Date</label>
          <label for="date_required" ng-if="material.isSkipInTender">Date Required On Site</label>
          <input
            ng-model="material.dateStart"
            type="text"
            name="created"
            id="inputCreated"
            ng-model="currentTime"
            datepicker/>
        </div>
      </div>
      <div class="row" style="display:none">
        <div class="col s12">
          <ul class="collection z-depth-1">
            <li class="collection-item vlalign-wrapper">
              <div class="row form" style="margin-bottom: 0px">
                <div class="col s12"><p>Enter work descriptions below:</p></div>
                <div class="input-field col s10">
                  <textarea id="description" class="materialize-textarea" ng-model="description1" ng-class="{'invalid' : materialDescriptionError}"></textarea>
                  <label for="description" class="">Description</label>
                  <p class="validate-message" ng-if="materialDescriptionError">Scope of work at least 1 item</p>
                </div>
                <div class="valign col s2">
                  <a class="btn" name="action" style="margin-top: 78px" ng-click="addDescriptionMaterial(description1)">Add</a>
                </div>
              </div>
            </li>
            <li class="collection-item vlalign" ng-repeat="description in material.descriptions track by $index">
              <div class="row" style="margin-bottom: 0px">
                <div class="col s10">
                  <p>{{description}}</p>
                </div>
                <div class="col s2">
                  <a class="btn-flat btn-flat" ng-click="removeDescriptionMaterial($index)">Remove</a>
                </div>
              </div>
            </li>

          </ul>
        </div>
      </div>
      <div class="row">
        <div class="col s12">
          <ul class="collection z-depth-1">
            <li class="collection-item vlalign-wrapper">
              <div class="row form" style="margin-bottom: 0px">
                <div class="col s12"><p>Enter materials required below:</p></div>
                <div class="input-field col s7">
                  <textarea id="description" class="materialize-textarea" ng-class="{'invalid' : requireError}"
                            ng-model="description"></textarea>
                  <label for="description">Description</label>
                  <p class="validate-message" ng-if="requireError">Material require details at least 1 item</p>
                </div>
                <div class="input-field col s3" style="margin-top: 67px">
                  <input id="quantity" type="number" name="requiredQuantity" class="validate" ng-model="quantity">
                  <label for="quantity">Quantity</label>
                  <p class="validate-message" ng-if="materialForm.requiredQuantity.$valid == false">Please input number</p>
                </div>
                <div class="valign col s2">
                  <a ng-if="materialForm.requiredQuantity.$valid == true" name="action" class="btn" style="margin-top:78px;"
                     ng-click="addNewRequire()">Add</a>
                </div>
              </div>
            </li>
            <li class="collection-item vlalign" ng-repeat="requirement in requirements">
              <div class="row" style="margin-bottom: 0px">
                <div class="col s7">{{requirement.description}}</div>
                <div class="col s3">{{requirement.quantity}}</div>
                <div class="col s2">
                  <a class="btn-flat btn-flat" ng-click="removeRequire($index)">Remove</a>
                </div>
              </div>
            </li>
          </ul>
        </div>
      </div>

      <div class="row">
        <div class="col s12">
          <ul class="collection z-depth-1">
            <li class="collection-item vlalign-wrapper">
              <div class="row form" style="margin-bottom: 0px">
                <div class="col s12"><p>Enter supplier details below:</p></div>
                <p class="validate-message" ng-if="supplierError">Supplier details at least 1 item</p>
                

                <div class="input-field col s7">
                  <angucomplete-alt id="ex1"
                                    pause="100"
                                    selected-object="materialMember.email"
                                    local-data="supplierTeamMember"
                                    search-fields="email"
                                    title-field="email"
                                    minlength="1"
                                    input-changed="supplierInputChanged"
                                    template-url="/my-custom-template.html"
                                    input-class="col s12"></angucomplete-alt>
                </div>
                <div class="input-field col s3">
                  <input id="phone_number" type="number" name="phoneNumber" class="validate" ng-model="newPhoneNumber">
                  <label for="phone_number">Phone Number</label>     
                  <p class="validate-message" ng-if="materialForm.phoneNumber.$valid == false">Please input number</p>             
                </div>
                <div class="valign col s2">
                  <a name="action" ng-if="materialForm.requiredQuantity.$valid == true" class="btn" style="margin-top:28px;" ng-click="addNewSupplier()">Add</a>
                </div>
              </div>
            </li>
            <li ng-if="!material.isSkipInTender" class="collection-item vlalign" ng-repeat="emailPhone in materialMember.emailsPhone">
              <div class="row" style="margin-bottom: 0px">
                <div class="col s7">{{emailPhone.email}}</div>
                <div class="col s3">{{emailPhone.phoneNumber}}</div>
                <div class="col s2" style="float:right">
                  <a class="btn-flat btn-flat" ng-click="removeSupplier($index)">Remove</a>
                </div>
              </div>
            </li>
            <li ng-if="material.isSkipInTender && $first" class="collection-item vlalign" ng-repeat="emailPhone in materialMember.emailsPhone">
              <div class="row" style="margin-bottom: 0px">
                <div class="col s7">{{emailPhone.email}}</div>
                <div class="col s3">{{emailPhone.phoneNumber}}</div>
                <div class="col s2" style="float:right">
                  <a class="btn-flat btn-flat" ng-click="removeSupplier($index)">Remove</a>
                </div>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="submit" class="modal-action waves-effect waves-green btn modal-action">ADD SUPPLIER</button>
      <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Cancel</a>
    </div>
  </form>
</div>
<!-- END MATERIAL PACKAGE -->

<script type="text/ng-template" id="/my-custom-template.html">
  <div class="angucomplete-holder" ng-class="{'angucomplete-dropdown-visible': showDropdown}">
    <input ng-model="searchStr"
           id="email"
           ng-disabled="disableInput"
           type="text"
           placeholder="{{placeholder}}"
           ng-focus="onFocusHandler()"
           class="{{inputClass}}"
           ng-focus="resetHideResults()"
           ng-blur="hideResults($event)"

           autocapitalize="off"
           autocorrect="off"
           autocomplete="off"
           ng-change="inputChangeHandler(searchStr)"/>
    <label for="email">Email</label>
    <div class="angucomplete-dropdown col s12" ng-show="showDropdown">
      <div class="angucomplete-searching" ng-show="searching" ng-bind="textSearching"></div>
      <div class="angucomplete-searching" ng-show="!searching && (!results || results.length == 0)" ng-bind="textNoResults"></div>
      <div class="angucomplete-row" ng-repeat="result in results" ng-click="selectResult(result)" ng-mouseenter="hoverRow($index)" ng-class="{'angucomplete-selected-row': $index == currentIndex}">
        <div ng-if="imageField" class="angucomplete-image-holder">
          <img ng-if="result.image && result.image != ''" ng-src="{{result.image}}" class="angucomplete-image"/>
          <div ng-if="!result.image && result.image != ''" class="angucomplete-image-default"></div>
        </div>
        <div class="angucomplete-title" ng-if="matchClass" ng-bind-html="result.title"></div>
        <div class="angucomplete-title" ng-if="!matchClass">{{ result.title }}</div>
        <div ng-if="matchClass && result.description && result.description != ''" class="angucomplete-description" ng-bind-html="result.description"></div>
        <div ng-if="!matchClass && result.description && result.description != ''" class="angucomplete-description">{{result.description}}</div>
      </div>

    </div>
  </div>
</script>