<div class="row" style="padding:12px">
    <div class="col s10 offset-s1">
        <div class="collection with-header">
            <div class="row collection-header" style="margin-bottom:0px">
                <div class="col">
                    <p style="margin-left: 10px" id="employeesHeader"><STRONG>DESIGN</STRONG></p>
                </div>
                <div class="col right">
                    <a ng-if="currentTeam.type == 'architect' && isLeader" href="#newDesign" class="modal-trigger" id="workOrderBtn" style="padding: 5px; font-size: 12px; color: black" >ADD A DESIGN</a>
                </div>
            </div>

            <div class="row collection-header" style="margin-bottom:0px;">
                <div class="col s12">
                    <div style="font-size: 12px;">
                        <a ng-class="{'current-select' : filterAll}" style="margin-left:30px; padding: 5px;" ng-click="filterAll = true; filter = {}">ALL</a>
                        <a ng-class="{'current-select' : filter.isCompleted == false}" ng-click="filter = {isCompleted : false}; filterAll = false;" style="margin-left:30px; padding: 5px;">IN PROGRESS</a>
                        <a ng-class="{'current-select' : filter.isCompleted}" ng-click="filter = {isCompleted : true}; filterAll = false;" style="margin-left:30px; padding: 5px;">COMPLETED</a>
                    </div>
                </div>
            </div>

            <div style="height: {{contentHeight -30}}px; overflow-y: auto; background-color: white; overflow-x:hidden;">
                <div ng-show="item.canSee || isLeader" style="cursor:pointer;" ng-mouseover="activeHover($event)" ng-mouseleave="removeHover($event)" class="collection-item row" ng-repeat="item in designs | filter: filter" ng-click="goToDesignDetail(item)">
                    <div class="col s9">{{item.name}}</div>
                    <div style="color: #757575">
                        <div class="col s1 valign-wrapper">
                            <div style="font-size:15px;">{{item.threads.length}}</div>
                            <i style="font-size: 15px; margin-left: 5px" class="material-icons valign">message</i>
                        </div>
                        <div class="col s1 valign-wrapper">
                            <div style="font-size:15px;">{{item.files.length}}</div>
                            <i style="font-size: 15px; margin-left: 5px" class="material-icons valign">insert_drive_file</i>
                        </div>
                        <div class="col s1 valign-wrapper">
                            <div style="font-size:15px;">{{item.tasks.length}}</div>
                            <i style="font-size: 15px; margin-left: 5px" class="material-icons valign">check</i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div id="newDesign" class="modal modal-fixed-bottom">
    <form novalidate name="form" ng-submit="createDesign(form)">
        <div class="modal-content">
            <div class="row">
                <div class="col s12"><h5>New Design For {{currentProject.name}}</h5></div>
            </div>
            <div class="row">
                <div class="col s12">
                    <input type="text" id="name" name="name" ng-model="design.name" required ng-class="{'invalid' : form.name.$invalid && submitted}">
                    <p class="validate-message" ng-if="form.name.$error.required && submitted">Design name is required</p>
                </div>
            </div>
            <div class="row">
                <div class="col s12">
                    <ul class="collection z-depth-1">
                        <li class="collection-item vlalign-wrapper">
                            <div class="row form" style="margin-bottom: 0px">
                                <div class="col s12"><p>Enter design description below:</p></div>
                                <div class="input-field col s10">
                                    <textarea name="description" id="description" class="materialize-textarea" ng-model="description" ng-class="{'invalid' : descriptionError}"></textarea>
                                    <label for="description" class="">Description</label>
                                    <p class="validate-message" ng-if="descriptionError">Please provide at least one description.</p>
                                </div>
                                <div class="col s2 valign">
                                    <button class="btn" type="button" name="action" style="margin-top: 78px" ng-click="addDescription(description)" id="addWorkDescBtn">Add</button>
                                </div>
                            </div>
                        </li>

                        <li class="collection-item vlalign" ng-repeat="description in design.descriptions track by $index">
                            <div class="row" style="margin-bottom: 0px">
                                <div class="col s10"><p>{{description}}</p></div>
                                <div class="col s2">
                                    <button class="btn-flat btn-flat" ng-click="removeDescription($index)">Remove</button>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row">
                <div class="col s12">
                    <div class="card-panel">
                        <div class="chips">
                            <div class="chips-head row current-assign">
                                <p>Current assignees:</p>
                                <p class="validate-message" ng-if="assgineesError">Current assignees must be at least 1 item</p>
                                <div class="card col" style="padding: 5px; margin-left: 10px" ng-repeat="staff in design.staffs">
                                    {{staff | name}} <span><a href="#!" ng-click="staffRevoke(staff,$index)" id="removeAssignee"><i class="mdi-navigation-cancel" style="margin-left: 5px"></i></a></span>
                                </div>
                            </div>

                            <div class="divider"></div>

                            <div class="row avaiable-assign">
                                <p>Avaiable assignees:</p>
                                <a href="#!" ng-click="staffAssign(staff,$index)" ng-repeat="staff in available track by $index">
                                    <div class="card col" style="padding: 5px; margin-left: 10px" >
                                        {{staff | name}}
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="submit" class="modal-action waves-effect waves-green btn modal-action" id="addWorkOrderBtn">ADD DESIGN</button>
            <button type="button" ng-click="closeModal()" class="modal-action modal-close waves-effect waves-green btn-flat ">Cancel</button>
        </div>
    </form>
</div>