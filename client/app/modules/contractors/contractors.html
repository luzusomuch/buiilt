
<div class="col s3">
   <a ng-if="currentTeam.type == 'builder' && isLeader" class="modal-trigger btn-large col s12" href="#newContractorPackage" style="margin-top: 8px; margin-bottom: 15px">Create New</a>
    <ul id="createNew" class="dropdown-content" style="margin-top: 15px">
      <li><a class="modal-trigger" href="#newContractorPackage">Contractor Package</a></li>
      <li><div class="divider"></div></li>
      <!-- <li><a class="modal-trigger" href="#newWorkPackage">Work Package</a></li> -->
      <!-- <li><a class="modal-trigger" href="#newMaterialPackage">Material Package</a></li> -->
    </ul>

   <div class="collection"  >
     <a href="#!" ng-click="filter = {isCompleted : false, isAccept : true}" class="collection-item"
        ng-class="{'active' : !filter.isCompleted && filter.isAccept}">In Progress</a>
     <a href="#!" ng-click="filter = {isCompleted : false, isAccept : false} " class="collection-item"
        ng-class="{'active' : !filter.isAccept && !filter.isAccept}">In Tender</a>
     <a href="#!" ng-click="filter = {isCompleted : true, isAccept : true}" class="collection-item"
        ng-class="{'active' : filter.isCompleted  && filter.isAccept}">Completed</a>
   </div>
 </div>

<div class="col s9">
  <div class="collection z-depth-1">
    <span ng-repeat="contractorPackage in contractorPackages | filter : filter">
      <a class="collection-item" ng-if="(currentTeam.type == 'builder' || currentTeam.type == 'homeOwner') && contractorPackage.isAccept"
         ui-sref='contractorRequest.contractorPackageInProcess({id: contractorPackage.project, packageId: contractorPackage._id})'>
        #{{$index + 1}} -  {{contractorPackage.name}}
        <span class="new badge">{{contractorPackage.__v}}</span>
      </a>
      <a class="collection-item" ng-if="(currentTeam.type == 'builder' || currentTeam.type == 'homeOwner') && !contractorPackage.isAccept"
         ui-sref='contractorRequest.viewContractorRequest({id: contractorPackage.project, packageId: contractorPackage._id})'>
        #{{$index + 1}} -  {{contractorPackage.name}}
        <span class="new badge">{{contractorPackage.__v}}</span>
      </a>
      <a class="collection-item" ng-if="currentTeam.type == 'contractor' && contractorPackage.isAccept"
         ui-sref='contractorRequest.contractorPackageInProcess({id: contractorPackage.project, packageId: contractorPackage._id})'>
        #{{$index + 1}} -  {{contractorPackage.name}}
        <span class="new badge">{{contractorPackage.__v}}</span>
      </a>
      <a class="collection-item" ng-if="currentTeam.type == 'contractor' && !contractorPackage.isAccept"
         ui-sref='contractorRequest.sendQuote({id: contractorPackage.project, packageId: contractorPackage._id})'>#{{$index + 1}} -  {{contractorPackage.name}}
        <span class="new badge">{{contractorPackage.__v}}</span>
      </a>
    </span>
  </div>
</div>
</div>

<div id="newContractorPackage" class="modal modal-fixed-footer">
<form method="post" name="form" ng-submit="createContractorPackage(form)" novalidate>
  <div class="modal-content">
  <div class="row">
    <div class="col s12">
      <h5>New Contractor Package</h5>
    </div>
  </div>
  <div class="row">
    <div class="input-field col s12">
      <input id="project_name" name="name" type="text" class="validate" ng-model="contractor.name" required
             ng-class="{'invalid' : form.name.$invalid && submitted}">
      <label for="project_name">Contractor Package Title</label>
      <p class="validate-message" ng-if="form.name.$error.required && submitted">Pacakge name is required</p>
    </div>
  </form>
</div>

<script type="text/ng-template" id="/my-custom-template.html">
  <div class="angucomplete-holder" ng-class="{'angucomplete-dropdown-visible': showDropdown}">
    <input ng-model="searchStr"
           id="email"
           ng-disabled="disableInput"
           type="text"
           placeholder="{{placeholder}}"
           ng-focus="onFocusHandler()"
           class="{{inputClass}}"
           ng-focus="resetHideResults()"
           ng-blur="hideResults($event)"

           autocapitalize="off"
           autocorrect="off"
           autocomplete="off"
           ng-change="inputChangeHandler(searchStr)"/>
    <label for="email">Email</label>
    <div class="angucomplete-dropdown col s12" ng-show="showDropdown">
      <div class="angucomplete-searching" ng-show="searching" ng-bind="textSearching"></div>
      <div class="angucomplete-searching" ng-show="!searching && (!results || results.length == 0)" ng-bind="textNoResults"></div>
      <div class="angucomplete-row" ng-repeat="result in results" ng-click="selectResult(result)" ng-mouseenter="hoverRow($index)" ng-class="{'angucomplete-selected-row': $index == currentIndex}">
        <div ng-if="imageField" class="angucomplete-image-holder">
          <img ng-if="result.image && result.image != ''" ng-src="{{result.image}}" class="angucomplete-image"/>
          <div ng-if="!result.image && result.image != ''" class="angucomplete-image-default"></div>
        </div>
        <div class="angucomplete-title" ng-if="matchClass" ng-bind-html="result.title"></div>
        <div class="angucomplete-title" ng-if="!matchClass">{{ result.title }}</div>
        <div ng-if="matchClass && result.description && result.description != ''" class="angucomplete-description" ng-bind-html="result.description"></div>
        <div ng-if="!matchClass && result.description && result.description != ''" class="angucomplete-description">{{result.description}}</div>
      </div>

    </div>
  </div>
</script>




