<div layout="row" class="detail-view-content">
	
	<div layout="column" flex="70" class="md-whiteframe-1dp">
		
		<div class="detail-header" layout="row" layout-padding>
			<p>{{ tender.tenderName }}</p>
			<span flex></span>
			<div ng-show="tender.inviter._id == currentUser._id">
				<md-button ng-click="distributeTender()" ng-show="!tender.isDistribute">Distribute Tender</md-button>
				<md-button ng-click="showModal($event, 'select-winner-tender-modal.html')" ng-show="tender.isDistribute && !tender.hasSelect">Select a Winner</md-button>
			</div>
			<md-chips class="set-filters" ng-show="tender.inviter._id == currentUser._id">
				<md-chip>Show Related Activities</md-chip>
			</md-chips>
	    </div>
		
		<div class="main-page-content" layout-padding>
			
			<div class="item-activity">
			
				<div layout="row" flex class="activity-stream-head">
					<p>This tender was created by <strong>{{tender.inviter.name}}</strong> on {{tender.createAt | date: 'dd-MM-yyyy'}}.</p>
				</div>
				
				<div layout="row" layout-align="center center" flex class="activity-stream" ng-repeat="activity in tender.inviterActivities">
					<span flex="5"></span>
					<div class="icon-type" ng-switch="activity.type">
                        <md-icon ng-switch-when="attach-addendum" class="material-icons md-primary">reply_all</md-icon>
                        <md-icon ng-switch-when="attach-scope" class="material-icons md-primary">list</md-icon>
                        <md-icon ng-switch-when="edit-tender" class="material-icons md-primary">edit</md-icon>
                        <md-icon ng-switch-when="invite-tender" class="material-icons md-primary">person_outline</md-icon>
                        <md-icon ng-switch-when="related-file" class="material-icons md-primary">attach_file</md-icon>
                        <md-icon ng-switch-when="related-thread" class="material-icons md-primary">chat_bubble_outline</md-icon>
                        <md-icon ng-switch-when="related-task" class="material-icons md-primary">done_all</md-icon>
						<md-icon ng-switch-when="select-winner" class="material-icons md-primary">format_list_bulleted</md-icon>
					</div>
					<span flex="5"></span>
					<div flex class="activity-detail">
						<p ng-switch="activity.type">
                            <strong>{{activity.user.name}}</strong> 
                            <span ng-switch-when="attach-addendum">has attached an addendum to this tender:{{activity.element.name}}</span>
                            <span ng-switch-when="attach-scope">has attached an scope to this tender:{{activity.element.content}}. You can find it <a target="_blank" href="{{activity.element.link}}">here</a>. Due date of this tender is {{activity.element.dateEnd | date: 'dd-MM-yyyy'}}</span>
                            <span ng-switch-when="edit-tender">has edited the details of this tender: {{(activity.element.name) ? "Name: "+activity.element.name+", " : ""}} {{(activity.element.description) ? "Description: "+activity.element.description+", " : ""}}.</span>
                            <span ng-switch-when="invite-tender">has invited new tenderer <span ng-repeat="member in activity.element.members">{{member.name}}, </span> </span>
                            <span ng-switch-when="related-thread">has created new related thread {{activity.element.content}}</span>
                            <span ng-switch-when="related-file">has created new related file {{activity.element.content}}</span>
                            <span ng-switch-when="related-task">has created new related task {{activity.element.content}}</span>
                            <span ng-switch-when="select-winner">has selected {{activity.element.name}} as winner of this tender</span>
                        </p>
						<p class="meta-data"><span class="time">{{activity.createdAt | date:'hh:mm a'}}</span> <span class="date">{{activity.createdAt |date:'dd-MM-yyyy'}}</span><p>
					</div>
				</div>
				
				<!-- <div layout="row" layout-align="center center" flex class="activity-stream">
					<span flex="5"></span>
					<div class="icon-type">
						<md-icon class="material-icons md-primary">edit</md-icon>
					</div>
					<span flex="5"></span>
					<div flex class="activity-detail">
						<p><strong>{ username }</strong> has edited the details of this tender: { summary of the edit - for example name: ... description: ... etc}.</p>
						<p class="meta-data"><span class="time">2:11 pm</span> <span class="date">03/01/2016</span><p>
					</div>
				</div>
				
				<div layout="row" layout-align="center center" flex class="activity-stream">
					<span flex="5"></span>
					<div class="icon-type">
						<md-icon class="material-icons md-primary">person_outline</md-icon>
					</div>
					<span flex="5"></span>
					<div flex class="activity-detail">
						<p><strong>{ username }</strong> has invited new tenderer, { new tenderer name }.</p>
						<p class="meta-data"><span class="time">2:11 pm</span> <span class="date">03/01/2016</span><p>
					</div>
				</div>
				
				<div layout="row" layout-align="center center" flex class="activity-stream">
					<span flex="5"></span>
					<div class="icon-type">
						<md-icon class="material-icons md-primary">format_list_bulleted</md-icon>
					</div>
					<span flex="5"></span>
					<div flex class="activity-detail">
						<p><strong>{ username }</strong> has selected the winner, "{ winner name }" for this tender.</p>
						<p class="meta-data"><span class="time">2:11 pm</span> <span class="date">03/01/2016</span><p>
					</div>
				</div> -->
				
			</div>
			
			<div>
  		  	  <md-fab-speed-dial ng-cloak md-open="false" md-direction="up" class="md-scale md-fab-bottom-right fab-main" ng-show="!isArchive">
  				  <md-fab-trigger>
  			  	      <md-button aria-label="Add an Item to this Project" class="md-fab md-primary">
  						  <md-tooltip md-direction="left">Actions...</md-tooltip>
  					      <md-icon class="material-icons" >add</md-icon>
  			  	      </md-button>
  		  	      </md-fab-trigger>
  				  <md-fab-actions>
			  	      <md-button aria-label="Open a New Message" class="md-fab md-raised md-mini md-primary" ng-click="showModal($event, 'attach-an-addendum.html')" ng-show="tender.inviter._id == currentUser._id && !tender.isDistribute">
	  					  <md-tooltip md-direction="left">Attach an Addendum</md-tooltip>
	  				      <md-icon class="material-icons">reply_all</md-icon>
			  	      </md-button>
  			  	      <md-button aria-label="Assign a New Task" class="md-fab md-raised md-mini md-primary" ng-click="showModal($event, 'invite-tender.html')" ng-show="tender.inviter._id == currentUser._id">
  	  					  <md-tooltip md-direction="left">Invite a Tenderer</md-tooltip>
  	  				      <md-icon class="material-icons">person_add</md-icon>
  			  	      </md-button>
  			  	      <md-button aria-label="Send a File" class="md-fab md-raised md-mini md-primary" ng-click="showModal($event, 'select-winner-tender-modal.html')" ng-show="tender.isDistribute && tender.inviter._id == currentUser._id && !tender.hasSelect">
  	  					  <md-tooltip md-direction="left">Select a Winning Tender</md-tooltip>
  	  				      <md-icon class="material-icons">format_list_bulleted</md-icon>
  			  	      </md-button>
			  	      <md-button aria-label="Attach a Related Message" class="md-fab md-raised md-mini" ng-click="showModal($event, 'attach-related-message.html')" ng-show="tender.isDistribute">
						  <md-tooltip md-direction="left">Broadcast a Message</md-tooltip>
					      <md-icon class="material-icons">chat_bubble_outline</md-icon>
			  	      </md-button>
  			  	      <md-button aria-label="Add a Related Task" class="md-fab md-raised md-mini" ng-click="showModal($event, 'attach-related-task.html')" ng-show="tender.isDistribute">
  	  					  <md-tooltip md-direction="left">Broadcast a Task</md-tooltip>
  	  				      <md-icon class="material-icons">done_all</md-icon>
  			  	      </md-button>
  			  	      <md-button aria-label="Add a Related File" class="md-fab md-raised md-mini" ng-click="showModal($event, 'attach-related-file.html')" ng-show="tender.isDistribute">
  	  					  <md-tooltip md-direction="left">Broadcast a File</md-tooltip>
  	  				      <md-icon class="material-icons">attach_file</md-icon>
  			  	      </md-button>
  			  	  </md-fab-actions>
  		  	  </md-fab-speed-dial>
		    </div>
			
		</div>
	</div>
		
	<tender-items flex="30" data="tender"></tender-items>
		
</div>