<div layout="row" layout-padding>
	
	<div layout="column" flex="70">
		
		<div layout="column" class="md-whiteframe-1dp detail-view-main">
				
			<div class="md-toolbar-tools">
				<md-button class="md-icon-button" back-button>
					<md-icon class="material-icons">arrow_back</md-icon>
					<md-tooltip md-direction="bottom">Back</md-tooltip>
				</md-button>
				
		        <h5 ng-model="tender.name" contenteditable>{{tender.name}}</h5>
				
				<span flex></span>

				<md-button ng-show="showSaveTitleBtn" class="md-primary" aria-label="Save Title" ng-click="changeTitle()">
					Save Changed!
				</md-button>
				
	  	      	<md-button ng-show="tender.owner._id==currentUser._id" aria-label="Show Tender Detail" class="md-icon-button" ng-click="showDetail=!showDetail">
					<md-tooltip md-direction="bottom">Show Tender Detail</md-tooltip>
			      	<i class="material-icons">info_outline</i>
	  	      	</md-button>
	
				
		    </div>
			
			<md-divider layout="row" flex></md-divider>
	
			<div layout="column" layout-margin flex>
				<div class="content">
					<div class="detail" ng-show="showDetail">
						<div layout="row">
							<md-button aria-label="Select Winner" class="md-primary" ng-show="tender.status=='open'" ng-click="showModal('select-winner.html')">Select Winner</md-button>
						</div>
						<form ng-submit="changeDetail()">
							<div layout="column">
								<p class="md-body-2">Please Select Events In List Below</p>
								<md-input-container>
									<label for="">Events List</label>
									<md-select ng-change="changeEventOrDocumentSet('event')" ng-model="tender.selectedEvent">
										<md-option ng-show="events.length===0">Please create event first</md-option>
										<md-option ng-repeat="ev in events" ng-value="ev._id">{{ev.name}}</md-option>
									</md-select>
								</md-input-container>
							</div>
							<div layout="column" ng-show="!tender.documentSet">
								<p class="md-body-2">Please Select Document Sets In List Below</p>
								<md-input-container>
									<label for="">Document Sets List</label>
									<md-select ng-change="changeEventOrDocumentSet('attach-document-set')" ng-model="tender.documentSetSelected">
										<md-option ng-show="documentSets.length===0">Please create document set first</md-option>
										<md-option ng-repeat="document in documentSets" ng-value="document._id">{{document.name}}</md-option>
									</md-select>
								</md-input-container>
							</div>
							<div layout="row">
								<md-button ng-click="showDetail=false">Close</md-button>
								<md-button type="submit" class="md-primary">Save Change</md-button>
							</div>
						</form>
					</div>
					<div class="item-activity" ng-show="!showDetail">
						<p class="md-body-2">Tender Main Activities</p>
						<div layout="row" layout-align="center center" flex class="activity-stream" layout-padding ng-repeat="activity in tender.activities" ng-show="activity.type=='attach-scope' || activity.type=='attach-addendum' || activity.type=='attach-document-set' || activity.type=='select-winner'">
							<div flex class="activity-detail" ng-switch="activity.type">
								<p ng-switch-when="attach-scope">
									<strong>{{activity.user.name}}</strong> has attached scope "{{activity.element.scope}}" at <strong>{{activity.createdAt | date: longDate}}</strong>
								</p>
								<p ng-switch-when="attach-addendum">
									<strong>{{activity.user.name}}</strong> has attached new addendum "{{activity.element.addendum}}" at <strong>{{activity.createdAt | date: longDate}}</strong>
								</p>
								<p ng-switch-when="attach-document-set">
									<strong>{{activity.user.name}}</strong> has attached document set at <strong>{{activity.createdAt | date: longDate}}</strong>. You can click <a ui-sref="project.documentation.all({id: tender.project})">here</a> to enter it
								</p>
								<p ng-switch-when="select-winner">
									<strong>{{activity.user.name}}</strong> has selected winner for this tender at <strong>{{activity.createdAt | date: longDate}}</strong>
								</p>
							</div>
						</div>
					</div>
					<span flex></span>
				</div>
				
				<md-divider></md-divider>
				
				<div layout="row" layout-align="center center">
		  	      	<md-button aria-label="Add Scope Or Addendum" class="md-primary" ng-click="showModal('add-scope-or-addendum.html')">
					  	Add Scope Or Addendum
		  	      	</md-button>
				</div>
				
			</div>
		</div>
	</div>

	<div layout="column" flex="30">
		
		<div layout="column" class="md-whiteframe-1dp detail-view-inspector">
				
			<div class="md-toolbar-tools">

				<span flex></span>
				
			</div>

			<md-divider flex></md-divider>
			
			<div layout="column" class="content">
				
				<inspector data="tender" type="tender" flex></inspector>
				
			</div>
			
		</div>
	</div>
</div>


